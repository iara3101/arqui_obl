FROM node:latest

# Carpeta clara para backend
WORKDIR /usr/src/backend

# Copiamos manifests primero para aprovechar cache
COPY package*.json ./

# Instalaci칩n simple con npm install (solo deps de prod)
# --omit=dev evita instalar devDependencies (igual que antes)
# --no-audit y --no-fund para builds m치s limpios/r치pidos
RUN npm install --no-audit --no-fund

# Copiamos el resto del c칩digo
COPY . .

EXPOSE 3000

CMD ["node", "src/server.js"]